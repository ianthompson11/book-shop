<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Test de productos</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .animate-fade-in-up {
      animation: fadeInUp 0.8s ease-out forwards;
    }
    .scrollbar-hide::-webkit-scrollbar { display: none; }
    .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
  </style>
</head>
<body class="bg-gray-50 p-8" data-authenticated="{% if user.is_authenticated %}true{% else %}false{% endif %}">

<!-- Include the navbar from store app -->
{% include 'store/navbar.html' %}

<!-- Aquí va el contenido completo de tu plantilla productos.html -->

{% comment %} CONTENIDO OMITIDO POR ESPACIO {% endcomment %}

<!-- Aquí termina tu contenido -->

<!-- Estilos adicionales -->
<style>
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
.animate-fade-in {
  animation: fadeIn 0.5s ease-out forwards;
}
@supports (backdrop-filter: blur(12px)) {
  .backdrop-blur-md {
    backdrop-filter: blur(12px);
  }
}
.hidden { display: none; }
</style>

<!-- Script para formularios y estrellas -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  const formFields = document.querySelectorAll('form input, form select, form textarea');
  formFields.forEach(field => {
    if (!field.classList.contains('rounded-md')) {
      field.classList.add('w-full', 'rounded-md', 'border-gray-300', 'shadow-sm', 'focus:border-blue-500', 'focus:ring-blue-500');
    }
  });

  const starButtons = document.querySelectorAll('.star-btn');
  const ratingInput = document.getElementById('id_score');
  const ratingText = document.querySelector('.rating-text');

  if (starButtons.length > 0 && ratingInput) {
    starButtons.forEach(btn => {
      btn.addEventListener('click', function() {
        const value = parseInt(this.dataset.value);
        ratingInput.value = value;
        ratingText.textContent = value + (value === 1 ? ' estrella' : ' estrellas');
        starButtons.forEach((star, index) => {
          if (index < value) {
            star.classList.add('text-yellow-400');
            star.classList.remove('text-gray-300');
          } else {
            star.classList.add('text-gray-300');
            star.classList.remove('text-yellow-400');
          }
        });
      });
    });
  }

  const showMoreBtn = document.getElementById('show-more-reviews');
  const hiddenReviews = document.querySelectorAll('.review-item.hidden');
  const chevronDown = document.getElementById('chevron-down');
  const chevronUp = document.getElementById('chevron-up');

  if (showMoreBtn) {
    let expanded = false;
    showMoreBtn.addEventListener('click', function() {
      if (!expanded) {
        hiddenReviews.forEach(review => review.classList.remove('hidden'));
        showMoreBtn.querySelector('span').textContent = 'Ver menos reseñas';
        chevronDown.classList.add('hidden');
        chevronUp.classList.remove('hidden');
      } else {
        hiddenReviews.forEach(review => review.classList.add('hidden'));
        showMoreBtn.querySelector('span').textContent = 'Ver más reseñas';
        chevronDown.classList.remove('hidden');
        chevronUp.classList.add('hidden');
      }
      expanded = !expanded;
    });
  }
});
</script>

<!-- Cart script -->
<script>
let cart = JSON.parse(localStorage.getItem("cart")) || [];
function addToCart(name, price, description, id) {
  const existingItem = cart.find(item => item.id === id);
  if (existingItem) {
    existingItem.quantity += 1;
  } else {
    cart.push({ name, quantity: 1, price, description, id });
  }
  localStorage.setItem('cart', JSON.stringify(cart));
  alert("Producto agregado al carrito");
  const cartCount = document.getElementById("cart-count");
  if (cartCount) {
    cartCount.textContent = `(${cart.length})`;
  }
}
</script>

</body>
</html>

